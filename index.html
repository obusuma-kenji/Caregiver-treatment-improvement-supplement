<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>対話型ダッシュボード：介護職員等処遇改善加算 2024年度改定</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: A user-centric, thematic dashboard structure. It flows from a high-level overview to a detailed breakdown of the system's mechanics, then to a practical simulation tool, and finally to strategic challenges and outlook. This non-linear structure prioritizes user tasks (understanding, planning, strategizing) over the report's linear format, using interactive elements like tabs and a simulator to make complex information digestible and engaging for care facility operators. -->
    <!-- Visualization & Content Choices: Report Info (Old vs. New System) -> Goal (Compare) -> Viz (HTML/CSS Diagram) -> Interaction (Static) -> Justification (Quickly show simplification). Report Info (3 Core Requirements) -> Goal (Organize) -> Viz (Tabs) -> Interaction (Click) -> Justification (Prevent info overload). Report Info (4 Tiers) -> Goal (Organize) -> Viz (Interactive HTML Diagram) -> Interaction (Click to highlight) -> Justification (Intuitive exploration). Report Info (Add-on Rates Table) -> Goal (Compare/Plan) -> Viz (Bar Chart) -> Interaction (Dropdown selection) -> Justification (Turns static data into a personalized planning tool) -> Library (Chart.js). Report Info (Wage Gap) -> Goal (Show Change) -> Viz (Line Chart) -> Interaction (Hover) -> Justification (Tells a powerful data story) -> Library (Chart.js). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #F9F9F7;
            color: #333333;
        }
        .tab-button.active {
            border-color: #3B82F6;
            color: #3B82F6;
            background-color: #EFF6FF;
        }
        .tier-card.active {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #3B82F6;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .sticky-nav {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            z-index: 50;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-5 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">介護職員等処遇改善加算</h1>
            <p class="mt-2 text-lg font-semibold text-blue-600">2024年度一本化・完全対応ダッシュボード</p>
            <p class="mt-4 max-w-3xl mx-auto text-gray-600">
                2024年6月、介護職員の待遇改善を目指す制度が大きく変わりました。複雑だった3つの加算が一つに統合され、事業者にとってより分かりやすく、活用しやすい仕組みになりました。このダッシュボードは、新しい制度の要点を対話的に理解し、あなたの事業所に最適な選択をするためのツールです。
            </p>
        </div>
    </header>

    <nav class="sticky-nav bg-white/80 backdrop-blur-sm shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center items-center space-x-2 sm:space-x-4 md:space-x-8 py-3 text-sm md:text-base overflow-x-auto">
                <a href="#overview" class="font-medium text-gray-600 hover:text-blue-600 transition-colors whitespace-nowrap px-2 py-1">制度の概要</a>
                <a href="#mechanics" class="font-medium text-gray-600 hover:text-blue-600 transition-colors whitespace-nowrap px-2 py-1">新制度の仕組み</a>
                <a href="#simulator" class="font-medium text-gray-600 hover:text-blue-600 transition-colors whitespace-nowrap px-2 py-1">加算率シミュレーター</a>
                <a href="#challenges" class="font-medium text-gray-600 hover:text-blue-600 transition-colors whitespace-nowrap px-2 py-1">課題と展望</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <section id="overview" class="mb-16 scroll-mt-24">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-8">なぜ制度は変わったのか？</h2>
            <div class="max-w-5xl mx-auto bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <p class="text-gray-700 mb-6">
                    今回の制度一本化の最大の目的は、事業者の**事務負担を軽減**し、より多くの事業所が上位の加算を取得できるようにすることです。旧制度は3つの加算が並立し、それぞれ要件や申請方法が異なり、非常に複雑でした。特に、経験豊富な職員の待遇改善を目的とした「特定処遇改善加算」は、その複雑さから取得率が伸び悩むという課題を抱えていました。新しい制度では、この構造がシンプルに整理されました。
                </p>
                <div class="grid md:grid-cols-2 gap-6 items-center">
                    <div class="border-2 border-red-300 rounded-lg p-4 bg-red-50">
                        <h3 class="text-xl font-bold text-red-700 text-center mb-3">旧制度（～2024年5月）</h3>
                        <div class="space-y-2">
                            <div class="bg-white p-3 rounded-md shadow-sm border border-gray-200">
                                <p class="font-semibold">処遇改善加算</p>
                                <p class="text-sm text-gray-600">キャリアパス要件が中心</p>
                            </div>
                            <div class="text-2xl text-center font-bold text-red-500">+</div>
                            <div class="bg-white p-3 rounded-md shadow-sm border border-gray-200">
                                <p class="font-semibold">特定処遇改善加算</p>
                                <p class="text-sm text-gray-600">経験・技能ある職員に重点配分</p>
                            </div>
                             <div class="text-2xl text-center font-bold text-red-500">+</div>
                            <div class="bg-white p-3 rounded-md shadow-sm border border-gray-200">
                                <p class="font-semibold">ベースアップ等支援加算</p>
                                <p class="text-sm text-gray-600">月給の引上げが目的</p>
                            </div>
                        </div>
                        <p class="mt-4 text-center text-red-600 font-medium">⇒ 複雑な事務手続きと低い取得率</p>
                    </div>
                    <div class="border-2 border-blue-400 rounded-lg p-4 bg-blue-50">
                        <h3 class="text-xl font-bold text-blue-700 text-center mb-3">新制度（2024年6月～）</h3>
                        <div class="flex items-center justify-center h-full">
                            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200 text-center w-full">
                                <p class="text-lg font-bold">介護職員等処遇改善加算</p>
                                <p class="text-sm text-gray-600 mt-1">3つの目的を一つの制度に統合</p>
                            </div>
                        </div>
                        <p class="mt-4 text-center text-blue-600 font-medium">⇒ 事務負担の軽減と柔軟な運用</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="mechanics" class="mb-16 scroll-mt-24">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-2">新制度の仕組みを理解する</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">新加算は「4つの階層」と「3つの要件」で構成されています。これらを理解することが制度活用の第一歩です。</p>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-12">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">ステップ1：4つの加算階層（I～IV）</h3>
                <p class="text-center text-gray-600 mb-6">下位の要件を満たし、追加要件をクリアすることで上位の階層を取得できる階段式の構造です。クリックして各階層の追加要件を確認してください。</p>
                <div id="tier-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                </div>
                <div id="tier-details" class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg min-h-[100px]">
                    <p class="font-semibold text-blue-800">上のカードをクリックすると、ここに詳細が表示されます。</p>
                </div>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">ステップ2：3つの必須要件</h3>
                 <p class="text-center text-gray-600 mb-6">どの階層を目指す場合でも、以下の3つの柱となる要件への対応が必要です。タブをクリックして詳細を確認しましょう。</p>
                <div class="mb-4 border-b border-gray-200">
                    <nav id="requirements-tabs" class="flex flex-wrap -mb-px justify-center" aria-label="Tabs">
                    </nav>
                </div>
                <div id="requirements-content">
                </div>
            </div>
        </section>

        <section id="simulator" class="mb-16 scroll-mt-24">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-2">加算率シミュレーター</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">あなたの事業所のサービス種類を選ぶと、取得できる加算率が分かります。どの階層を目指すかの経営判断にお役立てください。</p>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="max-w-sm mx-auto mb-6">
                    <label for="service-type-select" class="block mb-2 text-sm font-medium text-gray-900">サービス種類を選択してください:</label>
                    <select id="service-type-select" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="rateChart"></canvas>
                </div>
                <div id="simulator-summary" class="mt-6 text-center text-gray-700 bg-gray-50 p-4 rounded-lg">
                    <p>上記でサービス種類を選択すると、ここに要約が表示されます。</p>
                </div>
            </div>
        </section>

        <section id="challenges" class="scroll-mt-24">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-8">課題と今後の展望</h2>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">厳しい現実：拡大する賃金格差</h3>
                    <p class="text-gray-600 mb-4 text-sm">
                        処遇改善加算により介護職員の給与は上昇しましたが、全産業平均との差は依然として大きく、むしろ近年は拡大傾向にあります。これは、加算制度だけでは人材確保の決め手にならず、働きがいのある職場環境づくりが不可欠であることを示唆しています。
                    </p>
                    <div class="chart-container" style="height: 300px; max-height: 40vh;">
                        <canvas id="wageGapChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">事業者が向き合うべき課題</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center mr-3 mt-1">
                                <span>⇔</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">「柔軟な配分」という両刃の剣</h4>
                                <p class="text-gray-600 text-sm">職種間の配分ルールが撤廃されたことで、事業所の裁量は増えました。しかし、配分決定のプロセスが不透明だと、職員間の不公平感や対立を生むリスクがあります。透明性の高いルール作りが重要です。</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center mr-3 mt-1">
                                <span>⚙️</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">職場環境改善の実行負担</h4>
                                <p class="text-gray-600 text-sm">ICT機器の導入など生産性向上への取り組みは、初期投資や職員への教育が必要です。トップダウンではなく、現場の職員の理解と協力を得ながら、負担軽減というメリットを丁寧に説明し、進めることが成功の鍵となります。</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                             <div class="flex-shrink-0 h-6 w-6 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mr-3 mt-1">
                                <span>💡</span>
                            </div>
                            <div>
                                <h4 class="font-semibold">戦略的提言：制度の最大活用</h4>
                                <p class="text-gray-600 text-sm">この加算制度を、単なる義務ではなく、自社の労働環境を近代化し、長期的な人材定着に繋げるための「戦略的投資」と捉える視点が求められます。賃上げ促進税制など、他の支援策との併用も検討しましょう。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm">
            <p>&copy; 2024 介護職員等処遇改善加算・対話型ダッシュボード</p>
            <p class="text-xs text-gray-400 mt-1">このアプリケーションは公開情報に基づき作成されたものであり、最終的な判断は必ず公式資料をご参照ください。</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const tierData = [
                { id: 'IV', name: '加算 IV', description: 'キャリアパス要件(I, II)と職場環境等要件の基本的な項目を満たすことで取得可能。新制度の基礎となる階層です。', color: 'bg-green-100', textColor: 'text-green-800', borderColor: 'border-green-500' },
                { id: 'III', name: '加算 III', description: '加算IVの要件に加え、キャリアパス要件(III)である「昇給の仕組みの整備」が必要です。経験や資格に応じた昇給制度を就業規則等で定める必要があります。', color: 'bg-yellow-100', textColor: 'text-yellow-800', borderColor: 'border-yellow-500' },
                { id: 'II', name: '加算 II', description: '加算IIIの要件に加え、キャリアパス要件(IV)である「年収440万円以上の職員配置」と、より多くの職場環境等要件への取り組みが求められます。', color: 'bg-orange-100', textColor: 'text-orange-800', borderColor: 'border-orange-500' },
                { id: 'I', name: '加算 I', description: '最上位の階層。加算IIの要件に加え、キャリアパス要件(V)である「介護福祉士等の一定割合以上の配置」が必要です。', color: 'bg-red-100', textColor: 'text-red-800', borderColor: 'border-red-500' }
            ];

            const requirementsData = {
                monthly: {
                    title: '月額賃金改善要件',
                    icon: '💰',
                    content: `
                        <p class="mb-2">職員の安定した収入増を目的とする、新制度の最重要要件です。</p>
                        <ul class="space-y-3 list-disc list-inside text-gray-600">
                            <li><span class="font-bold text-blue-600">50%ルール:</span> 取得した加算額のうち、<strong class="font-semibold">加算IV相当額の半分以上</strong>を、賞与などではなく毎月の給与（基本給 or 定額手当）の引き上げに充てる必要があります。</li>
                            <li>これにより、事業者は人件費の固定化という財務的コミットメントを求められますが、職員にとっては生活の安定に直結します。</li>
                        </ul>
                    `
                },
                career: {
                    title: 'キャリアパス要件',
                    icon: '📈',
                    content: `
                        <p class="mb-2">職員の専門性向上とキャリア形成を支援するための要件です。</p>
                        <ul class="space-y-3 list-disc list-inside text-gray-600">
                            <li><strong class="font-semibold">要件I & II:</strong> 職位や賃金体系を整備し、研修計画を策定・実施します。（加算IVで必須）</li>
                            <li><strong class="font-semibold">要件III:</strong> 経験や資格に応じた昇給制度を設けます。（加算III以上で必須）</li>
                            <li><strong class="font-semibold">要件IV:</strong> 経験・技能ある職員のうち1名以上の年収を440万円以上にします。（加算II以上で必須）</li>
                            <li><strong class="font-semibold">要件V:</strong> 介護福祉士等を一定割合以上配置します。（加算Iで必須）</li>
                        </ul>
                    `
                },
                environment: {
                    title: '職場環境等要件',
                    icon: '🏢',
                    content: `
                        <p class="mb-2">賃金以外の労働環境を改善し、働きがいのある職場作りを目指します。</p>
                        <ul class="space-y-3 list-disc list-inside text-gray-600">
                            <li><strong class="font-semibold">6つの分野:</strong> 「入職促進」「資質の向上」「両立支援」「健康管理」「生産性向上」「やりがい醸成」の6分野から、指定された数の取り組みを実施します。</li>
                            <li><strong class="font-semibold">生産性向上の重視:</strong> 特にICT機器（記録ソフト、インカム等）や介護ロボットの導入、業務手順の見直しなどが推奨されています。</li>
                             <li>上位の加算階層（I, II）では、より多くの取り組みと、その内容の公表が求められます。</li>
                        </ul>
                    `
                }
            };

            const serviceRateData = {
                "訪問介護 等": { rates: [24.5, 22.4, 18.2, 14.5], summary: "最も加算率が高いサービスの一つ。人材確保が特に重要な分野であることが反映されています。" },
                "（介護予防）訪問入浴介護": { rates: [10.0, 9.4, 7.9, 6.3], summary: "専門性が高く、身体的負担も大きいサービスです。安定した人材確保が求められます。" },
                "通所介護（デイサービス）等": { rates: [9.2, 9.0, 8.0, 6.4], summary: "多くの事業所が該当するサービス。加算階層による率の差が比較的小さいため、費用対効果の分析が重要です。" },
                "（介護予防）通所リハビリテーション": { rates: [8.6, 8.3, 6.6, 5.3], summary: "リハビリ専門職との連携も重要なサービス。加算を他職種へどう配分するかの検討が必要です。" },
                "（介護予防）特定施設入居者生活介護 等": { rates: [12.8, 12.2, 11.0, 8.8], summary: "入居型施設であり、24時間体制での手厚い人員配置が求められるため、加算率も比較的高く設定されています。" },
                "（介護予防）認知症対応型通所介護": { rates: [18.1, 17.4, 15.0, 12.2], summary: "認知症ケアの高い専門性が求められるため、訪問介護に次いで高い加算率が設定されています。" },
                "（看護）小規模多機能型居宅介護 等": { rates: [14.9, 14.6, 13.4, 10.6], summary: "多様なサービスを一体的に提供するため、職員の多能工化とチームワークが重要になります。" },
                "（介護予防）認知症対応型共同生活介護": { rates: [18.6, 17.8, 15.5, 12.5], summary: "グループホームなど、家庭的な環境でのケアが特徴。職員と利用者の密な関係性が求められます。" },
                "介護老人福祉施設（特養）等": { rates: [14.0, 13.6, 11.3, 9.0], summary: "従来型・ユニット型など施設形態により基本報酬が異なりますが、加算率は共通です。" },
                "介護老人保健施設（老健）等": { rates: [7.5, 7.1, 5.4, 4.4], summary: "在宅復帰を目的とする施設。医療・リハビリ職との連携が密であり、柔軟な配分が鍵となります。" },
                "介護医療院 等": { rates: [5.1, 4.7, 3.6, 2.9], summary: "医療提供が主となるため、他の介護サービスに比べ加算率は低めに設定されています。" }
            };

            const wageGapData = {
                labels: ['2020', '2021', '2022', '2023', '2024'],
                datasets: [
                    {
                        label: '介護職員（処遇改善加算取得事業所）',
                        data: [31.5, 32.4, 33.1, 33.5, 33.8],
                        borderColor: '#3B82F6',
                        backgroundColor: '#3B82F6',
                        tension: 0.1
                    },
                    {
                        label: '全産業平均',
                        data: [37.7, 38.5, 39.5, 40.4, 42.1],
                        borderColor: '#F97316',
                        backgroundColor: '#F97316',
                        tension: 0.1
                    }
                ]
            };
            
            const tierContainer = document.getElementById('tier-container');
            const tierDetails = document.getElementById('tier-details');
            tierData.forEach((tier, index) => {
                const card = document.createElement('div');
                card.className = `tier-card p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${tier.borderColor} ${tier.color}`;
                card.innerHTML = `<h4 class="font-bold text-lg ${tier.textColor}">${tier.name}</h4>`;
                card.dataset.tierId = tier.id;
                tierContainer.appendChild(card);
            });

            tierContainer.addEventListener('click', (e) => {
                const card = e.target.closest('.tier-card');
                if (!card) return;

                document.querySelectorAll('.tier-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');

                const tierId = card.dataset.tierId;
                const data = tierData.find(t => t.id === tierId);
                tierDetails.innerHTML = `<p class="font-semibold ${data.textColor}">${data.name}の追加要件:</p><p class="mt-1 text-sm ${data.textColor.replace('800', '700')}">${data.description}</p>`;
            });

            const requirementsTabs = document.getElementById('requirements-tabs');
            const requirementsContent = document.getElementById('requirements-content');
            Object.keys(requirementsData).forEach((key, index) => {
                const data = requirementsData[key];
                const button = document.createElement('button');
                button.className = `tab-button inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 font-medium`;
                button.textContent = `${data.icon} ${data.title}`;
                button.dataset.tabTarget = key;
                if (index === 0) {
                    button.classList.add('active');
                }
                requirementsTabs.appendChild(button);

                const contentDiv = document.createElement('div');
                contentDiv.id = key;
                contentDiv.className = 'tab-content p-4 bg-gray-50 rounded-lg';
                if (index !== 0) {
                    contentDiv.classList.add('hidden');
                }
                contentDiv.innerHTML = data.content;
                requirementsContent.appendChild(contentDiv);
            });

            requirementsTabs.addEventListener('click', (e) => {
                const button = e.target.closest('.tab-button');
                if (!button) return;

                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                button.classList.add('active');

                document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                document.getElementById(button.dataset.tabTarget).classList.remove('hidden');
            });

            const serviceSelect = document.getElementById('service-type-select');
            Object.keys(serviceRateData).forEach(serviceName => {
                const option = document.createElement('option');
                option.value = serviceName;
                option.textContent = serviceName;
                serviceSelect.appendChild(option);
            });

            const rateCtx = document.getElementById('rateChart').getContext('2d');
            const rateChart = new Chart(rateCtx, {
                type: 'bar',
                data: {
                    labels: ['加算 I', '加算 II', '加算 III', '加算 IV'],
                    datasets: [{
                        label: '加算率 (%)',
                        data: [],
                        backgroundColor: ['#EF4444', '#F97316', '#FBBF24', '#22C55E'],
                        borderColor: ['#DC2626', '#EA580C', '#D97706', '#16A34A'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'サービス種類別の加算率' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '加算率 (%)' }
                        }
                    }
                }
            });
            
            const simulatorSummary = document.getElementById('simulator-summary');

            function updateRateChart() {
                const selectedService = serviceSelect.value;
                const data = serviceRateData[selectedService];
                rateChart.data.datasets[0].data = data.rates;
                rateChart.options.plugins.title.text = `${selectedService} の加算率`;
                rateChart.update();
                
                simulatorSummary.innerHTML = `<p class="font-semibold">${selectedService}</p><p class="text-sm mt-1">${data.summary}</p>`;
            }

            serviceSelect.addEventListener('change', updateRateChart);
            
            const wageCtx = document.getElementById('wageGapChart').getContext('2d');
            new Chart(wageCtx, {
                type: 'line',
                data: wageGapData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: '平均給与額の推移（月額・万円）' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${context.raw}万円`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: '平均給与額（万円）' }
                        }
                    }
                }
            });

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            updateRateChart();
            tierContainer.querySelector('.tier-card').click();
            requirementsTabs.querySelector('.tab-button').click();
        });
    </script>
</body>
</html>
